<div id=registrationFormContainer>
    <div class="container">
        <form [formGroup]="registrationForm" (ngSubmit)="signUp()" class="offset-md-2 col-md-8 offset-lg-2 col-lg-8 form-box">
            <h1>Activity Sign-Up</h1>
            <p><em>*Due to the number of covid cases some events may cancel without notice.</em></p>
            <div class="form-group">
                <label>First Name</label>
                <input formControlName="firstName" type="text" class="form-control" [ngClass]="{ 'is-invalid': submitted && f.firstName.errors }"/>
                <div *ngIf="submitted && f.firstName.errors" class="invalid-feedback">
                    <p *ngIf="f.firstName.errors?.required">First name is required.</p>
                    <p *ngIf="f.firstName.errors?.maxlength">First name should be less than 50 characters.</p>
                </div>
            </div>
            <div class="form-group">
                <label>Last Name</label>
                <input formControlName="lastName" type="text" class="form-control" [ngClass]="{ 'is-invalid': submitted && f.firstName.errors }"/>
                <div *ngIf="submitted && f.lastName.errors" class="invalid-feedback">
                    <p *ngIf="f.lastName.errors?.required">Last name is required.</p>
                    <p *ngIf="f.lastName.errors?.maxlength">Last name should be less than 50 characters.</p>
                </div>
            </div>
            <div class="form-group">
                <label>Email</label>
                <input formControlName="email" type="email" class="form-control" [ngClass]="{ 'is-invalid': submitted && f.firstName.errors }"/>
                <div *ngIf="submitted && f.lastName.errors" class="invalid-feedback">
                    <p *ngIf="f.email.errors?.required">Email is required.</p>
                    <p *ngIf="f.email.errors?.maxlength">Email should be less than 50 characters.</p>
                </div>
            </div>
            
            <div class="form-group">
                <label>Activity</label>
                <input
                    formControlName="activity"
                    type="text"
                    class="form-control"
                    [ngClass]="{ 'is-invalid': submitted && f.activity.errors }"
                    [ngbTypeahead]="search"
                    [resultTemplate]="rt"
                    [inputFormatter]="formatter"
                />
                <div *ngIf="submitted && f.activity.errors" class="invalid-feedback">
                    <p *ngIf="f.activity.errors?.required">Please specify the event you are attending.</p>
                    <p *ngIf="f.activity.errors?.notfound">Sorry we cannot find that event.</p>
                </div>
            </div>
            
            <div>
                <button type="submit" class="form-control btn-primary">Sign Up</button>
            </div>
        </form>
    </div>
</div>
<ng-template #rt let-r="result">
    <ngb-highlight [result]="r.name"></ngb-highlight>
</ng-template>